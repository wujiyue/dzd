<?xml version="1.0" encoding="UTF-8" ?>  
<!DOCTYPE mapper PUBLIC   
    "-//mybatis.org//DTD Mapper 3.0//EN"  
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="[repoPackage].[modelClass][daoNameSuffix]">


	<!--<sql id="addColumns">[ADDCOLUMNS]</sql> -->
	<!--<sql id="updateColumns">[UPDATECOLUMNS]</sql> -->
	
	[CACHE]

	<sql id="allColumns">[ALLCOLUMNS]</sql>

	<!--如果实体类中属性名与数据库表中的字段名不一致就需要用resultMap映射-->
	<resultMap id="[lowerModelClass]Result" type="[beanPackage].[modelClass][beanNameSuffix]">
		[resultMap]
	</resultMap>

    <sql id="[modelClass]_Where_Clause">
        [GET_Where_Clause]
    </sql>

    <select id="get"  resultMap="[lowerModelClass]Result">
        select <include refid="allColumns"/>
        from [TABLE]
        where
        [pkColumnName] =#{[pkName]}

    </select> 
    
    <insert id="add" useGeneratedKeys="true" keyProperty="id" parameterType="[beanPackage].[modelClass][beanNameSuffix]"[FLUSHCACHE]>
    	insert into [TABLE]([ADDCOLUMNS])
    	values ([ADD])
    </insert>

    <insert id="addBatch"[FLUSHCACHE]>
        insert into [TABLE] ([ADDCOLUMNS])
        values
        <foreach collection="list" item="item" separator="," >
        	([ADDBATCH])
        </foreach>
    </insert>

    <update id="update" parameterType="[beanPackage].[modelClass][beanNameSuffix]"[FLUSHCACHE]>
    	update [TABLE] 
    	<set>
    		[UPDATESET]
    	</set>
    	 where
    	[pkColumnName] =#{[pkName]}
    </update>

	<update id="updateByMap" parameterType="map"[FLUSHCACHE]>
        update [TABLE]
        <set>
            [UPDATESET]
        </set>
        where
        [pkColumnName] =#{[pkName]}
    </update>
	<update id="updateByMapBatch" parameterType="map"[FLUSHCACHE]>
         update [TABLE]
         <set>
         [UPDATESET]
         </set>
         where
         [pkColumnName] in
         <foreach collection="ids" item = "id" open="(" separator="," close=")">
         #{id}
         </foreach>
    </update>
  	<delete id="delete"[FLUSHCACHE]>
      	delete  from [TABLE] where [pkColumnName] =#{[pkName]}
    </delete>
  	<delete id="deleteBatch"[FLUSHCACHE]>
      	delete  from [TABLE] where [pkColumnName] in
        <foreach collection="array" item = "ids" open="(" separator="," close=")">
        #{ids}
        </foreach>
    </delete>

    <select id="find" resultMap="[lowerModelClass]Result" parameterType="java.util.Map">
        SELECT <include refid="allColumns"/> FROM [TABLE]
        <where>
            [GET_AVAILABLE]
            [GET_DELETED]
            <include refid="[modelClass]_Where_Clause"/>
        </where>
    </select>

    <select id="findByMap" resultMap="[lowerModelClass]Result"  parameterType="map" >
   		SELECT <include refid="allColumns"/> FROM [TABLE]
   		<where>
   		    [findByMap]
   		</where>
   	</select>
[findByMbtsXml]
</mapper>
