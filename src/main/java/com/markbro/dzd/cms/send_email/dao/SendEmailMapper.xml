<?xml version="1.0" encoding="UTF-8" ?>  
<!DOCTYPE mapper PUBLIC   
    "-//mybatis.org//DTD Mapper 3.0//EN"  
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.markbro.dzd.cms.send_email.dao.SendEmailMapper">
	<!--<sql id="addColumns">id,emailtype,userid,toemail,fromemail,title,content,sendflag,feedback,createTime,sendTime</sql> -->
	<!--<sql id="updateColumns">emailtype,userid,toemail,fromemail,title,content,sendflag,feedback,sendTime}</sql> -->
	<cache type="com.markbro.asoiaf.mybatis.cache.AsoiafCache" eviction="org.apache.ibatis.cache.decorators.LruCache" readOnly="true" size="1024" flushInterval="3600000"/>

	<sql id="allColumns">id,emailtype,userid,toemail,fromemail,title,content,sendflag,feedback,createTime,sendTime</sql>

	<!--如果实体类中属性名与数据库表中的字段名不一致就需要用resultMap映射-->
	<resultMap id="sendEmailResult" type="com.markbro.dzd.cms.send_email.bean.SendEmail">
		<result property="id" column="id" />
		<result property="emailtype" column="emailtype" />
		<result property="userid" column="userid" />
		<result property="toemail" column="toemail" />
		<result property="fromemail" column="fromemail" />
		<result property="title" column="title" />
		<result property="content" column="content" />
		<result property="sendflag" column="sendflag" />
		<result property="feedback" column="feedback" />
		<result property="createTime" column="createTime" />
		<result property="sendTime" column="sendTime" />
	</resultMap>

    <sql id="SendEmail_Where_Clause">
        <if test="id != null and id != ''">
				AND id = #{id}
		</if>
			<if test="emailtype != null and emailtype != ''">
				AND emailtype = #{emailtype}
		</if>
			<!--<if test="userid != null and userid != ''">
				AND userid = #{userid}
		</if>-->
			<if test="toemail != null and toemail != ''">
				AND toemail = #{toemail}
		</if>
			<if test="fromemail != null and fromemail != ''">
				AND fromemail = #{fromemail}
		</if>
			<if test="title != null and title != ''">
				AND title = #{title}
		</if>
			<if test="content != null and content != ''">
				AND content = #{content}
		</if>
			<if test="sendflag != null and sendflag != ''">
				AND sendflag = #{sendflag}
		</if>
			<if test="feedback != null and feedback != ''">
				AND feedback = #{feedback}
		</if>
			<if test="createTime != null and createTime != ''">
				AND createTime = #{createTime}
		</if>
			<if test="sendTime != null and sendTime != ''">
				AND sendTime = #{sendTime}
		</if>
			
    </sql>

    <select id="get"  resultMap="sendEmailResult">
        select <include refid="allColumns"/>
        from cms_send_email
        where
        id =#{id}
    </select>

    <select id="getMap"  resultType="java.util.Map">
            select <include refid="allColumns"/>
            from cms_send_email
            where
            id =#{id}
    </select>

    <insert id="add" useGeneratedKeys="true" keyProperty="id" parameterType="com.markbro.dzd.cms.send_email.bean.SendEmail" flushCache="true">
    	insert into cms_send_email(id,emailtype,userid,toemail,fromemail,title,content,sendflag,createTime)
    	values (#{id},#{emailtype},#{userid},#{toemail},#{fromemail},#{title},#{content},#{sendflag},now())
    </insert>

    <insert id="addByMap" useGeneratedKeys="true" keyProperty="id" parameterType="java.util.Map" flushCache="true">
    	insert into cms_send_email(id,emailtype,userid,toemail,fromemail,title,content,sendflag,createTime)
    	values (#{id},#{emailtype},#{userid},#{toemail},#{fromemail},#{title},#{content},#{sendflag},now())
    </insert>

    <insert id="addBatch" flushCache="true">
        insert into cms_send_email (id,emailtype,userid,toemail,fromemail,title,content,sendflag,feedback,createTime,sendTime)
        values
        <foreach collection="list" item="item" separator="," >
        	(#{item.id},#{item.emailtype},#{item.userid},#{item.toemail},#{item.fromemail},#{item.title},#{item.content},#{item.sendflag},#{item.feedback},now(),#{item.sendTime})
        </foreach>
    </insert>

    <update id="update" parameterType="com.markbro.dzd.cms.send_email.bean.SendEmail" flushCache="true">
    	update cms_send_email
    	<set>
    		<if test="emailtype != null">emailtype=#{emailtype},</if>
			<!--<if test="userid != null">userid=#{userid},</if>-->
			<if test="toemail != null">toemail=#{toemail},</if>
			<if test="fromemail != null">fromemail=#{fromemail},</if>
			<if test="title != null">title=#{title},</if>
			<if test="content != null">content=#{content},</if>
			<if test="sendflag != null">sendflag=#{sendflag},</if>
			<!--<if test="feedback != null">feedback=#{feedback},</if>
			<if test="sendTime != null">sendTime=#{sendTime},</if>-->
    	</set>
    	 where
    	id =#{id}
    </update>

	<update id="updateByMap" parameterType="map" flushCache="true">
        update cms_send_email
        <set>
            <if test="emailtype != null">emailtype=#{emailtype},</if>
			<if test="userid != null">userid=#{userid},</if>
			<if test="toemail != null">toemail=#{toemail},</if>
			<if test="fromemail != null">fromemail=#{fromemail},</if>
			<if test="title != null">title=#{title},</if>
			<if test="content != null">content=#{content},</if>
			<if test="sendflag != null">sendflag=#{sendflag},</if>
			<if test="feedback != null">feedback=#{feedback},</if>
			<if test="sendTime != null">sendTime=#{sendTime},</if>
			
        </set>
        where
        id =#{id}
    </update>
	<update id="updateByMapBatch" parameterType="map" flushCache="true">
         update cms_send_email
         <set>
         <if test="emailtype != null">emailtype=#{emailtype},</if>
			<if test="userid != null">userid=#{userid},</if>
			<if test="toemail != null">toemail=#{toemail},</if>
			<if test="fromemail != null">fromemail=#{fromemail},</if>
			<if test="title != null">title=#{title},</if>
			<if test="content != null">content=#{content},</if>
			<if test="sendflag != null">sendflag=#{sendflag},</if>
			<if test="feedback != null">feedback=#{feedback},</if>
			<if test="sendTime != null">sendTime=#{sendTime},</if>
			
         </set>
         where
         id in
         <foreach collection="ids" item = "id" open="(" separator="," close=")">
         #{id}
         </foreach>
    </update>
  	<delete id="delete" flushCache="true">
      	delete  from cms_send_email where id =#{id}
    </delete>
  	<delete id="deleteBatch" flushCache="true">
      	delete  from cms_send_email where id in
        <foreach collection="array" item = "ids" open="(" separator="," close=")">
        #{ids}
        </foreach>
    </delete>

    <select id="find" resultMap="sendEmailResult" parameterType="java.util.Map">
        SELECT <include refid="allColumns"/> FROM cms_send_email
        <where>
            
            
            <include refid="SendEmail_Where_Clause"/>
        </where>
    </select>

    <select id="findByMap" resultMap="sendEmailResult"  parameterType="map" >
   		SELECT <include refid="allColumns"/> FROM cms_send_email
   		<where>
   		    <if test="id != null and id != ''">
				AND id = #{id}
			</if>
			<if test="emailtype != null and emailtype != ''">
				AND emailtype = #{emailtype}
			</if>
			<if test="userid != null and userid != ''">
				AND userid = #{userid}
			</if>
			<if test="toemail != null and toemail != ''">
				AND toemail = #{toemail}
			</if>
			<if test="fromemail != null and fromemail != ''">
				AND fromemail = #{fromemail}
			</if>
			<if test="title != null and title != ''">
				AND title = #{title}
			</if>
			<if test="content != null and content != ''">
				AND content = #{content}
			</if>
			<if test="sendflag != null and sendflag != ''">
				AND sendflag = #{sendflag}
			</if>
			<if test="feedback != null and feedback != ''">
				AND feedback = #{feedback}
			</if>
			<if test="createTime != null and createTime != ''">
				AND createTime = #{createTime}
			</if>
			<if test="sendTime != null and sendTime != ''">
				AND sendTime = #{sendTime}
			</if>
			
   		</where>
   	</select>
</mapper>
